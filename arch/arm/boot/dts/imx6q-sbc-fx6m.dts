/*
* Copyright 2014 CompuLab Ltd.
*
* Author: Valentin Raevsky <valentin@compulab.co.il>
*
* The code contained herein is licensed under the GNU General Public
* License. You may obtain a copy of the GNU General Public License
* Version 2 or later at the following locations:
*
* http://www.opensource.org/licenses/gpl-license.html
* http://www.gnu.org/copyleft/gpl.html
*/

#include "imx6q-cm-fx6.dts"

/ {
	model = "CompuLab CM-FX6 on SBC-FX6m";	
	compatible = "compulab,cm-fx6", "compulab,sbc-fx6m", "fsl,imx6q";

	eth@pcie {
		compatible = "intel,i211";
		local-mac-address = [FF FF FF FF FF FF];
		status = "okay";
	};

	gpio-keys {
		compatible = "gpio-keys";
		power {
			label = "Power Button";
			gpios = <&gpio1 29 1>;
			linux,code = <116>; /* KEY_POWER */
			gpio-key,wakeup;
		};
	};
};

&iomuxc {
	imx6q-sb-fx6m {
		/* pins for uart2 */
		pinctrl_uart2: uart2grp {
			fsl,pins = <
				MX6QDL_PAD_GPIO_7__UART2_TX_DATA 0x1b0b1
				MX6QDL_PAD_GPIO_8__UART2_RX_DATA 0x1b0b1
				MX6QDL_PAD_SD4_DAT5__UART2_RTS_B 0x1b0b1
				MX6QDL_PAD_SD4_DAT6__UART2_CTS_B 0x1b0b1
		>;
		};

		/* pins for pcie */
		pinctrl_pcie: pciegrp {
			fsl,pins = <
				MX6QDL_PAD_ENET_RXD1__GPIO1_IO26 0x80000000
				MX6QDL_PAD_EIM_CS1__GPIO2_IO24 0x80000000
		>;
	    };
	};
};

&i2c1 {
	rtc@56 {
		compatible = "emmicro,em3027";
		reg = <0x56>;
	};
};

&pcie {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_pcie>;
	reset-gpio = <&gpio1 26 0>;
	power-on-gpio = <&gpio2 24 0>;
	status = "okay";
};

/* rear serial console */
&uart2 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart2>;
	/* fsl,dte-mode; */
	fsl,uart-has-rtscts;
	dma-names = "rx", "tx";
	dmas = <&sdma 27 4 0>, <&sdma 28 4 0>;
	status = "okay";
};
